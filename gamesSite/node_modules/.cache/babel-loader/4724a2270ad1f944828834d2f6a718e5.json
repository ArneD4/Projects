{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: !0\n});\n\nvar e = require(\"react\"),\n    t = function () {\n  return (t = Object.assign || function (e) {\n    for (var t, n = 1, r = arguments.length; n < r; n++) for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]);\n\n    return e;\n  }).apply(this, arguments);\n};\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n\n\n!function (e) {\n  if (e && \"undefined\" != typeof window) {\n    var t = document.createElement(\"style\");\n    t.setAttribute(\"type\", \"text/css\"), t.innerHTML = e, document.head.appendChild(t);\n  }\n}(\"._space3d {\\n  perspective: 1000px;\\n  text-align: center;\\n  display: inline-block;\\n  padding: unset;\\n  border: unset;\\n  background-color: transparent;\\n  outline: unset;\\n  box-shadow: unset;\\n}\\n._space3d ._3dbox {\\n  display: inline-block;\\n  transition: all 0.85s cubic-bezier(0.175, 0.885, 0.32, 1.275);\\n  text-align: center;\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  transform-style: preserve-3d;\\n  transform: rotateX(-90deg) rotateY(0deg) rotateZ(0deg);\\n}\\n._space3d ._3dface {\\n  overflow: hidden;\\n  position: absolute;\\n  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2), 0 0 50px rgba(0, 0, 0, 0.3);\\n  opacity: 1;\\n  background-size: auto 100%;\\n  color: #000;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n._space3d .defaultFace {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  display: grid;\\n  grid-template-columns: repeat(5, 1fr);\\n  border-radius: 12px;\\n  box-shadow: inset 0 0 6px #000000;\\n  background-color: #fff;\\n}\\n._space3d .defaultFace div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n._space3d .defaultFace span {\\n  width: 60%;\\n  height: 60%;\\n  box-shadow: 0 0 6px #000000;\\n  border-radius: 50%;\\n  background-color: #000;\\n}\\n._space3d.one ._3dbox {\\n  transform: rotateX(90deg) rotateY(0deg) rotateZ(0deg);\\n}\\n._space3d.two ._3dbox {\\n  transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);\\n}\\n._space3d.three ._3dbox {\\n  transform: rotateX(0deg) rotateY(180deg) rotateZ(0deg);\\n}\\n._space3d.four ._3dbox {\\n  transform: rotateX(-90deg) rotateY(90deg) rotateZ(90deg);\\n}\\n._space3d.five ._3dbox {\\n  transform: rotateX(90deg) rotateY(-90deg) rotateZ(90deg);\\n}\\n._space3d.rolling ._3dbox {\\n  transform-style: preserve-3d;\\n  animation: spin 2s infinite linear;\\n}\\n\\n@keyframes spin {\\n  0% {\\n    transform: translateZ(-100px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);\\n  }\\n  16% {\\n    transform: translateZ(-100px) rotateX(180deg) rotateY(180deg) rotateZ(0deg);\\n  }\\n  33% {\\n    transform: translateZ(-100px) rotateX(360deg) rotateY(90deg) rotateZ(180deg);\\n  }\\n  50% {\\n    transform: translateZ(-100px) rotateX(360deg) rotateY(360deg) rotateZ(360deg);\\n  }\\n  66% {\\n    transform: translateZ(-100px) rotateX(180deg) rotateY(360deg) rotateZ(270deg);\\n  }\\n  83% {\\n    transform: translateZ(-100px) rotateX(270deg) rotateY(180deg) rotateZ(180deg);\\n  }\\n  100% {\\n    transform: translateZ(-100px) rotateX(360deg) rotateY(360deg) rotateZ(360deg);\\n  }\\n}\");\n\nvar n = {\n  1: \"one\",\n  2: \"two\",\n  3: \"three\",\n  4: \"four\",\n  5: \"five\",\n  6: \"six\"\n},\n    r = {\n  1: function (e) {\n    return {\n      transform: \"rotateX(-90deg) translate3d(0, 0, \" + e + \"px)\"\n    };\n  },\n  2: function (e) {\n    return {\n      transform: \"translate3d(0, 0, \" + e + \"px)\"\n    };\n  },\n  3: function (e) {\n    return {\n      transform: \"rotateY(180deg) translate3d(0, 0, \" + e + \"px)\"\n    };\n  },\n  4: function (e) {\n    return {\n      left: \"50%\",\n      marginLeft: \"-\" + e + \"px\",\n      transform: \"rotateY(-90deg) translate3d(0, 0, \" + e + \"px)\"\n    };\n  },\n  5: function (e) {\n    return {\n      left: \"50%\",\n      marginLeft: \"-\" + e + \"px\",\n      transform: \"rotateY(90deg) translate3d(0, 0, \" + e + \"px)\"\n    };\n  },\n  6: function (e) {\n    return {\n      transform: \"rotateX(90deg) translate3d(0, 0, \" + e + \"px)\"\n    };\n  }\n},\n    a = {\n  1: [12],\n  2: [11, 13],\n  3: [6, 12, 18],\n  4: [6, 8, 16, 18],\n  5: [6, 8, 12, 16, 18],\n  6: [6, 8, 11, 13, 16, 18]\n},\n    o = [\"_3dface _3dface--one\", \"_3dface _3dface--two\", \"_3dface _3dface--three\", \"_3dface _3dface--four\", \"_3dface _3dface--five\", \"_3dface _3dface--six\"],\n    d = function (e, t) {\n  for (var n = [], r = 0; r < e; r++) n.push(t(r));\n\n  return n;\n},\n    i = e.useState,\n    l = e.useEffect;\n\nexports.default = function (s) {\n  var c = s.rollingTime,\n      f = void 0 === c ? 1e3 : c,\n      u = s.onRoll,\n      p = s.defaultValue,\n      g = void 0 === p ? 6 : p,\n      m = s.size,\n      x = void 0 === m ? 250 : m,\n      v = s.faceBg,\n      b = s.faces,\n      h = void 0 === b ? [] : b,\n      y = s.disabled,\n      _ = s.cheatValue,\n      w = s.placement,\n      Z = s.sound,\n      k = s.triggers,\n      E = void 0 === k ? [\"click\"] : k,\n      Y = function (e, t) {\n    var n = {};\n\n    for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);\n\n    if (null != e && \"function\" == typeof Object.getOwnPropertySymbols) {\n      var a = 0;\n\n      for (r = Object.getOwnPropertySymbols(e); a < r.length; a++) t.indexOf(r[a]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]]);\n    }\n\n    return n;\n  }(s, [\"rollingTime\", \"onRoll\", \"defaultValue\", \"size\", \"faceBg\", \"faces\", \"disabled\", \"cheatValue\", \"placement\", \"sound\", \"triggers\"]),\n      X = i(g),\n      O = X[0],\n      j = X[1],\n      L = i(!1),\n      P = L[0],\n      z = L[1],\n      F = i([]),\n      M = F[0],\n      N = F[1],\n      T = i({}),\n      V = T[0],\n      C = T[1],\n      S = i({}),\n      A = S[0],\n      B = S[1],\n      I = function () {\n    var e;\n    Z && (e = new Audio(Z)).play(), z(!0), setTimeout(function () {\n      var t = Math.floor(6 * Math.random() + 1);\n      _ && (t = _), z(!1), j(t), e && e.pause(), u && u(t);\n    }, f);\n  },\n      R = function (e) {\n    (null == E ? void 0 : E.length) && E.includes(e.key) && I();\n  };\n\n  return l(function () {\n    if (\"undefined\" != typeof window && (null == E ? void 0 : E.length)) return window.addEventListener(\"keypress\", R), function () {\n      window.removeEventListener(\"keypress\", R);\n    };\n  }, [E]), l(function () {\n    N(function (i, l, s) {\n      return o.map(function (o, c) {\n        return {\n          className: o,\n          children: l[c] ? null : e.createElement(\"div\", {\n            className: \"defaultFace \" + n[c + 1]\n          }, d(25, function (t) {\n            return e.createElement(\"div\", {\n              key: t\n            }, a[c + 1].includes(t) && e.createElement(\"span\", null));\n          })),\n          style: t(t(t(t({}, r[c + 1](i / 2)), {\n            width: i + \"px\",\n            height: i + \"px\"\n          }), s && {\n            backgroundColor: s\n          }), l[c] && {\n            backgroundImage: \"url(\" + l[c] + \")\"\n          })\n        };\n      });\n    }(x, h, v));\n  }, [x, h.length, v]), l(function () {\n    var e,\n        n = null === (e = null == w ? void 0 : w.split(\"-\")) || void 0 === e ? void 0 : e.reduce(function (e, n) {\n      var r;\n      return t(t({}, e), ((r = {})[n] = [\"left\", \"right\"].includes(n) ? 0 : \"-\" + x + \"px\", r));\n    }, {});\n    C(n);\n  }, [w, x]), l(function () {\n    B(t(t(t({}, Y), V), {\n      width: x + \"px\",\n      height: x + \"px\",\n      filter: y ? \"grayscale(100%)\" : \"unset\"\n    }));\n  }, [V, x, y]), (null == M ? void 0 : M.length) ? e.createElement(\"button\", {\n    disabled: y || P,\n    onClick: function () {\n      (null == E ? void 0 : E.length) && E.includes(\"click\") && I();\n    },\n    style: A,\n    className: \"_space3d \" + n[O] + \" \" + (P && \"rolling\")\n  }, e.createElement(\"div\", {\n    className: \"_3dbox\"\n  }, e.createElement(\"div\", t({}, M[0])), e.createElement(\"div\", t({}, M[1])), e.createElement(\"div\", t({}, M[2])), e.createElement(\"div\", t({}, M[3])), e.createElement(\"div\", t({}, M[4])), e.createElement(\"div\", t({}, M[5])))) : null;\n};","map":{"version":3,"sources":["../src/_utils.ts","../src/index.tsx"],"names":["valueClassMap","1","2","3","4","5","6","faceTransformMap","translate","transform","left","marginLeft","defaultFaceGrid","faceClasses","times","counter","callback","data","i","push","useState","useEffect","React.useState","size","faces","faceBg","map","className","index","children","React.createElement","idx","key","includes","style","width","height","backgroundColor","backgroundImage","props","onRoll","_b","_c","_d","disabled","cheatValue","placement","sound","_e","rest","_f","value","setValue","defaultValue","_g","rolling","setRolling","_h","faceArray","setFaceArray","_j","placementStyles","setPlacementStyles","_k","buttonStyles","setButtonStyles","handleDiceRoll","diceAudio","Audio","play","setTimeout","rollValue","Math","floor","random","pause","rollingTime","keyPressHandler","event","triggers","length","window","addEventListener","removeEventListener","getFaceArray","positionStyles","split","reduce","acc","curr","filter","onClick"],"mappings":"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","sourcesContent":["import { ReactChild } from 'react';\nimport { TValueClassMap, TFaceTransformMap, TDefaultFaceGrid } from './_types';\n\nexport const valueClassMap: TValueClassMap = {\n    1: 'one',\n    2: 'two',\n    3: 'three',\n    4: 'four',\n    5: 'five',\n    6: 'six',\n};\n\nexport const faceTransformMap: TFaceTransformMap = {\n    1: (translate: number) => ({ transform: `rotateX(-90deg) translate3d(0, 0, ${translate}px)` }),\n    2: (translate: number) => ({ transform: `translate3d(0, 0, ${translate}px)` }),\n    3: (translate: number) => ({ transform: `rotateY(180deg) translate3d(0, 0, ${translate}px)` }),\n    4: (translate: number) => ({ left: '50%', marginLeft: `-${translate}px`, transform: `rotateY(-90deg) translate3d(0, 0, ${translate}px)` }),\n    5: (translate: number) => ({ left: '50%', marginLeft: `-${translate}px`, transform: `rotateY(90deg) translate3d(0, 0, ${translate}px)` }),\n    6: (translate: number) => ({ transform: `rotateX(90deg) translate3d(0, 0, ${translate}px)` }),\n};\n\nexport const defaultFaceGrid: TDefaultFaceGrid = {\n    1: [12],\n    2: [11, 13],\n    3: [6, 12, 18],\n    4: [6, 8, 16, 18],\n    5: [6, 8, 12, 16, 18],\n    6: [6, 8, 11, 13, 16, 18]\n};\n\nexport const faceClasses = [\n    '_3dface _3dface--one',\n    '_3dface _3dface--two',\n    '_3dface _3dface--three',\n    '_3dface _3dface--four',\n    '_3dface _3dface--five',\n    '_3dface _3dface--six'\n];\n\nexport const times = (counter: number, callback: (index: number) => ReactChild) => {\n    const data = [];\n    for(let i = 0; i < counter; i++) {\n        data.push(callback(i));\n    }\n\n    return data;\n}","import * as React from 'react';\nimport './styles.scss';\nimport { TProps, TSingleFace, TValue } from './_types';\nimport { defaultFaceGrid, faceClasses, faceTransformMap, times, valueClassMap } from './_utils';\n\nconst { useState, useEffect } = React;\n\nconst getFaceArray = (size: number, faces: string[], faceBg?: string): TSingleFace[] => {\n    return faceClasses.map((className: string, index: number) => ({\n        className,\n        children: !faces[index] ? (\n            <div className={`defaultFace ${valueClassMap[(index + 1) as TValue]}`}>\n                {times(25, (idx) => (\n                    <div key={idx}>\n                        {defaultFaceGrid[(index + 1) as TValue].includes(idx) && <span />}\n                    </div>\n                ))}\n            </div>\n        ) : null,\n        style: {\n            ...faceTransformMap[(index + 1) as TValue](size / 2),\n            width: size + 'px',\n            height: size + 'px',\n            ...(faceBg && { backgroundColor: faceBg }),\n            ...(faces[index] && { backgroundImage: `url(${faces[index]})` }),\n        },\n    }));\n};\n\nexport default function Dice(props: TProps) {\n    const { rollingTime = 1000, onRoll, defaultValue = 6, size = 250, faceBg, faces = [], disabled, cheatValue, placement, sound, triggers = ['click'], ...rest } = props;\n    const [value, setValue] = useState<TValue>(defaultValue);\n    const [rolling, setRolling] = useState(false);\n    const [faceArray, setFaceArray] = useState<TSingleFace[]>([]);\n    const [placementStyles, setPlacementStyles] = useState<React.CSSProperties>({});\n    const [buttonStyles, setButtonStyles] = useState<React.CSSProperties>({});\n\n    const handleDiceRoll = () => {\n        let diceAudio: HTMLAudioElement;\n        if (sound) {\n            diceAudio = new Audio(sound);\n            diceAudio.play();\n        }\n        setRolling(true);\n        setTimeout(() => {\n            let rollValue = Math.floor((Math.random() * 6) + 1) as TValue;\n            if (cheatValue) rollValue = cheatValue;\n            \n            setRolling(false);\n            setValue(rollValue);\n            \n            if (diceAudio) diceAudio.pause();\n            if (!onRoll) return;\n            onRoll(rollValue);\n        }, rollingTime);\n    };\n\n    const keyPressHandler = (event: KeyboardEvent) => {\n        if (!triggers?.length || !triggers.includes(event.key)) {\n            return;\n        }\n\n        handleDiceRoll();\n    };\n\n    const clickHandler = () => {\n        if (!triggers?.length || !triggers.includes('click')) {\n            return;\n        }\n\n        handleDiceRoll();\n    };\n\n    useEffect(() => {\n        if (typeof window === 'undefined' || !triggers?.length) {\n            return;\n        }\n        window.addEventListener('keypress', keyPressHandler);\n        // Remove event listeners on cleanup\n        return () => {\n          window.removeEventListener('keypress', keyPressHandler);\n        };\n    }, [triggers]);\n    \n    useEffect(() => {\n        setFaceArray(getFaceArray(size, faces, faceBg));\n    }, [size, faces.length, faceBg]);\n\n    useEffect(() => {\n        const positionStyles = placement?.split('-')?.reduce((acc, curr) => {\n            return { ...acc, [curr]: ['left', 'right'].includes(curr) ? 0 : `-${size}px` };\n        }, {}) as React.CSSProperties;\n        setPlacementStyles(positionStyles);\n    }, [placement, size]);\n\n    useEffect(() => {\n        setButtonStyles({\n            ...rest,\n            ...placementStyles,\n            width: size + 'px',\n            height: size + 'px',\n            filter: disabled ? 'grayscale(100%)' : 'unset' \n        });\n    }, [placementStyles, size, disabled]);\n\n    if (!faceArray?.length) return null;\n\n    return (\n        <button disabled={disabled || rolling} onClick={clickHandler} style={buttonStyles} className={`_space3d ${valueClassMap[value]} ${rolling && 'rolling'}`}>\n            <div className=\"_3dbox\">\n                <div {...faceArray[0]} />\n                <div {...faceArray[1]} />\n                <div {...faceArray[2]} />\n                <div {...faceArray[3]} />\n                <div {...faceArray[4]} />\n                <div {...faceArray[5]} />\n            </div>\n        </button>\n    )\n}"]},"metadata":{},"sourceType":"script"}